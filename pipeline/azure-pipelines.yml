# Node.js with Angular
# Build a Node.js project that uses Angular.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
  - master

variables:
  workingDirectory: paymentsense-coding-challenge-website

stages:
  - stage: "Build"
    displayName: "Build and Test"
    jobs:
      - job: BuildFrontend
        displayName: "Build And Test Frontend"
        pool:
          vmImage: "ubuntu-latest"
        steps:
          - template: "jobs/build-frontend.yml"
            parameters:
              workingDirectory: paymentsense-coding-challenge-website

      - job: BuildBackend
        displayName: "Build and Test Backend"
        pool:
          vmImage: "ubuntu-latest"
        steps:
          - template: "jobs/build-backend.yml"
            parameters:
              workingDirectory: paymentsense-coding-challenge-api
              buildPlatform: "Any CPU"
              buildConfiguration: "Release"
